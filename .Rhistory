aes(x = year, y = values, label = sprintf("%0.1f", values)),
size = 2.5, vjust = 0.1, hjust=-.4, color='black') +
##
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p3
ggsave(p3, file='UE.png', height = 20, width=20)
pp0last <- pp0 %>% group_by(geo, age) %>%
##arrange(year) %>%
slice(which.max(year))
View(pp0last)
p3 <- pp0 |> filter (sex == "T") |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate(values = values/first(values) ) |>
ggplot(aes(x=year, y=values, color=age)) +
##ggplot(aes(x=year, y=values)) +
##
#geom_text(data = pp0last,
#          aes(x = year, y = values, label = sprintf("%0.1f", values)),
#          size = 2.5, vjust = 0.1, hjust=-.4, color='black') +
##
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p3
ggsave(p3, file='UE.png', height = 20, width=20)
pp0last <- pp0 %>% group_by(geo, age) %>%
##arrange(year) %>%
slice(which.max(year))
View(pp0last)
pp0last <- pp0 |> filter (sex == "T") |>  group_by(geo, age) %>%
##arrange(year) %>%
slice(which.max(year))
View(pp0last)
p3 <- pp0 |> filter (sex == "T") |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate(values = values/first(values) ) |>
ggplot(aes(x=year, y=values, color=age)) +
##ggplot(aes(x=year, y=values)) +
##
geom_text(data = pp0last,
aes(x = year, y = values, label = sprintf("%0.1f", values)),
size = 2.5, vjust = 0.1, hjust=-.4, color='black') +
##
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p3
ggsave(p3, file='UE.png', height = 20, width=20)
p3 <- pp0 |> filter (sex == "T") |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate(values = values/first(values),
txtvalues = values,
) |>
ggplot(aes(x=year, y=values, color=age)) +
##ggplot(aes(x=year, y=values)) +
##
#geom_text(data = pp0last,
#          aes(x = year, y = values, label = sprintf("%0.1f", values)),
#          size = 2.5, vjust = 0.1, hjust=-.4, color='black') +
##
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p3
ggsave(p3, file='UE.png', height = 20, width=20)
pp0last <- pp0 |> filter (sex == "T") |>  group_by(geo, age) |>
##arrange(year) %>%
slice(which.max(year))
p3 <- pp0 |> filter (sex == "T") |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate(values = values/first(values),
txtvalues = values,
) |>
ggplot(aes(x=year, y=values, color=age)) +
##ggplot(aes(x=year, y=values)) +
##
geom_text(data = pp0last,
aes(x = year, y = values, color=age, label = sprintf("%0.1f", values)),
size = 2.5, vjust = 0.1, hjust=-.4, color='black') +
##
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p3
p3 <- pp0 |> filter (sex == "T") |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate (a.last = if_else (year == last.year, sprintf("%.1f", values), NA))
p3 <- pp0 |> filter (sex == "T") |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate (a.last = if_else (year == last.year, sprintf("%.1f", values), NA))
p3 <- pp0 |> filter (sex == "T") |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate (a.last = if_else (year == last.year, sprintf("%.1f", values), NA)) |>
mutate(values = values/first(values)) |>
ggplot(aes(x=year, y=values, color=age)) +
##ggplot(aes(x=year, y=values)) +
##
geom_text(aes(label = a.last), size=3, vjust = +1.6, hjust=.8, color = 'black', alpha=.9 ) +
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p3 <- pp0 |> filter (sex == "T") |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate (a.last = if_else (year == last.year, sprintf("%.1f", values), NA)) |>
mutate(values = values/first(values)) |>
ggplot(aes(x=year, y=values, color=age)) +
##ggplot(aes(x=year, y=values)) +
##
geom_text(aes(label = a.last), size=3, vjust = +1.6, hjust=.8, color = 'black', alpha=.9 ) +
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p3
ggsave(p3, file='UE.png', height = 20, width=20)
p3 <- pp0 |> filter (sex == "T") |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(values = values/first(values)) |>
mutate (a.last = if_else (year == last.year, sprintf("%.1f", values), NA)) |>
ggplot(aes(x=year, y=values, color=age)) +
##ggplot(aes(x=year, y=values)) +
##
geom_text(aes(label = a.last), size=3, vjust = +1.6, hjust=.8, color = 'black', alpha=.9 ) +
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p3
ggsave(p3, file='UE.png', height = 20, width=20)
p3 <- pp0 |> filter (sex == "T") |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(values = values/first(values)) |>
mutate (a.last = if_else (year == last.year, sprintf("%.2f", values), NA)) |>
ggplot(aes(x=year, y=values, color=age)) +
##ggplot(aes(x=year, y=values)) +
##
geom_text(aes(label = a.last), size=3, vjust = +1.6, hjust=.8, color = 'black', alpha=.9 ) +
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p3
ggsave(p3, file='UE.png', height = 20, width=20)
p3 <- pp0 |> filter (sex == "T") |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(values = values/first(values)) |>
mutate (a.last = if_else (year == last.year, sprintf("%.2f", 100 - values * 100), NA)) |>
ggplot(aes(x=year, y=values, color=age)) +
##ggplot(aes(x=year, y=values)) +
##
geom_text(aes(label = a.last), size=3, vjust = +1.6, hjust=.8, color = 'black', alpha=.9 ) +
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p3
ggsave(p3, file='UE.png', height = 20, width=20)
p3 <- pp0 |> filter (sex == "T") |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(values = values/first(values)) |>
mutate (a.last = if_else (year == last.year, sprintf("%.0f", 100 - values * 100), NA)) |>
ggplot(aes(x=year, y=values, color=age)) +
##ggplot(aes(x=year, y=values)) +
##
geom_text(aes(label = a.last), size=3, vjust = +1.6, hjust=.8, color = 'black', alpha=.9 ) +
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p3
ggsave(p3, file='UE.png', height = 20, width=20)
p3 <- pp0 |> filter (sex == "T") |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(values = values/first(values)) |>
mutate (a.last = if_else (year == last.year, sprintf("%.0f", values * 100 - 100), NA)) |>
ggplot(aes(x=year, y=values, color=age)) +
##ggplot(aes(x=year, y=values)) +
##
geom_text(aes(label = a.last), size=3, vjust = +1.6, hjust=.8, color = 'black', alpha=.9 ) +
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p3
ggsave(p3, file='UE.png', height = 20, width=20)
dp <- get_eurostat("proj_23np",  stringsAsFactors = FALSE)
levels(as.factor(dp$geo))
levels(as.factor(dp$age))
## Assumptions
fr <- get_eurostat("proj_23naasfr",  stringsAsFactors = FALSE)
dp0 <- dp |> filter(age %in% ages ) |> filter (projection == 'BSL') |>
mutate (age = if_else(age == 'TOTAL', 'T', 'Y'),
year = as.Date(substr(TIME_PERIOD, 1, 4), format = "%Y" )) |>
select (age, sex, geo, year, values)
dp.ue <- dp0 |> group_by(year, age, sex) |> summarise(values = sum(values)/1000)
p1 <- dp.ue |> filter (year >= as.Date("2024-12-31")) |>
ggplot(aes(x=year, y=values)) +
geom_line(size=.5) +
facet_wrap(~ age + sex, ncol = 2, scales='free_y')
p1
p2 <- dp0 |> filter (sex == "T") |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(values = values/first(values)) |>
mutate (a.last = if_else (year == last.year, sprintf("%.0f", values * 100 - 100), NA)) |>
ggplot(aes(x=year, y=values, color=age)) +
##ggplot(aes(x=year, y=values)) +
##
geom_text(aes(label = a.last), size=3, vjust = +1.6, hjust=.8, color = 'black', alpha=.9 ) +
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p2 <- dp0 |> filter (sex == "T") |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(values = values/first(values)) |>
mutate (a.last = if_else (year == last.year, sprintf("%.0f", values * 100 - 100), NA)) |>
ggplot(aes(x=year, y=values, color=age)) +
##ggplot(aes(x=year, y=values)) +
##
geom_text(aes(label = a.last), size=3, vjust = +1.6, hjust=.8, color = 'black', alpha=.9 ) +
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p2 <- dp0 |> filter (sex == "T") |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(values = values/first(values)) |>
mutate (a.last = if_else (year == last.year, sprintf("%.0f", values * 100 - 100), NA)) |>
ggplot(aes(x=year, y=values, color=age)) +
##ggplot(aes(x=year, y=values)) +
##
geom_text(aes(label = a.last), size=3, vjust = +1.6, hjust=.8, color = 'black', alpha=.9 ) +
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p2
ggsave(p2, file='UEM.png', height = 20, width=20)
p2 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(values = values/first(values)) |>
mutate (a.last = if_else (year == last.year, sprintf("%.0f", values * 100 - 100), NA)) |>
ggplot(aes(x=year, y=values, color=age)) +
##ggplot(aes(x=year, y=values)) +
##
geom_text(aes(label = a.last), size=3, vjust = +1.6, hjust=.8, color = 'black', alpha=.9 ) +
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p2
ggsave(p2, file='UEM.png', height = 20, width=20)
##countries <- c('PL', 'CZ', 'DE', 'LT', 'LV', 'HU', 'RO', 'SK', 'SI', 'EU27_2020')
small.countries <- c ('CY', 'EA20', 'EU27_2020', 'MT', 'LU')
p2 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(values = values/first(values)) |>
mutate (a.last = if_else (year == last.year, sprintf("%.0f", values * 100 - 100), NA)) |>
ggplot(aes(x=year, y=values, color=age)) +
##ggplot(aes(x=year, y=values)) +
##
geom_text(aes(label = a.last), size=3, vjust = +1.6, hjust=.8, color = 'black', alpha=.9 ) +
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p2
ggsave(p2, file='UEM.png', height = 20, width=20)
p2 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(values = values/first(values)) |> filter (geo == 'PL')
View(p2)
p2 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(v=values,
values = values/first(values)) |> filter (geo == 'PL')
View(p2)
dp <- get_eurostat("proj_23nanmig",  stringsAsFactors = FALSE)
dp0 <- dp |> filter(age %in% ages ) |> filter (projection == 'BSL') |>
mutate (age = if_else(age == 'TOTAL', 'T', 'Y'),
year = as.Date(substr(TIME_PERIOD, 1, 4), format = "%Y" )) |>
select (age, sex, geo, year, values)
dp.ue <- dp0 |> group_by(year, age, sex) |> summarise(values = sum(values)/1000)
p1 <- dp.ue |> filter (year >= as.Date("2024-12-31")) |>
ggplot(aes(x=year, y=values)) +
geom_line(size=.5) +
facet_wrap(~ age + sex, ncol = 2, scales='free_y')
p1
p2 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(v=values,
values = values/first(values)) |> filter (geo == 'PL')
View(p2)
p2 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(v=values,
values = values/first(values)) |> #|> filter (geo == 'PL')
mutate (a.last = if_else (year == last.year, sprintf("%.0f", values * 100 - 100), NA)) |>
ggplot(aes(x=year, y=values, color=age)) +
##ggplot(aes(x=year, y=values)) +
##
geom_text(aes(label = a.last), size=3, vjust = +1.6, hjust=.8, color = 'black', alpha=.9 ) +
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p2 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(v=values,
values = values/first(values)) |> #|> filter (geo == 'PL')
mutate (a.last = if_else (year == last.year, sprintf("%.0f", values * 100 - 100), NA)) |>
ggplot(aes(x=year, y=values, color=age)) +
##ggplot(aes(x=year, y=values)) +
##
geom_text(aes(label = a.last), size=3, vjust = +1.6, hjust=.8, color = 'black', alpha=.9 ) +
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p2
ggsave(p2, file='UEM.png', height = 20, width=20)
p2 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(v=values,
values = values/first(values)) |> filter (geo == 'PL')
View(p2)
p2 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(v=values,
values = values/first(values)) |> filter (geo == 'PL')
View(p2)
p2 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(v=values,
values = values/first(values)) |> filter (geo == 'PL') |>
mutate (a.last = if_else (year == last.year, sprintf("%.0f", values * 100 - 100), NA)) |>
ggplot(aes(x=year, y=values, color=age)) +
##ggplot(aes(x=year, y=values)) +
##
geom_text(aes(label = a.last), size=3, vjust = +1.6, hjust=.8, color = 'black', alpha=.9 ) +
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p2 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(v=values,
values = values/first(values)) |> filter (geo == 'PL') |>
mutate (a.last = if_else (year == last.year, sprintf("%.0f", values * 100 - 100), NA)) |>
ggplot(aes(x=year, y=values, color=age)) +
##ggplot(aes(x=year, y=values)) +
##
geom_text(aes(label = a.last), size=3, vjust = +1.6, hjust=.8, color = 'black', alpha=.9 ) +
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p2
ggsave(p2, file='UEM.png', height = 20, width=20)
p2 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(v=values,
values = values/first(values)) |> filter (geo == 'PL') |>
mutate (a.last = if_else (year == last.year, sprintf("%.0f", values * 100 - 100), NA)) |>
ggplot(aes(x=year, y=values, color=age)) +
##
geom_text(aes(label = a.last), size=3, vjust = +1.6, hjust=.8, color = 'black', alpha=.9 ) +
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p2
ggsave(p2, file='UEM.png', height = 20, width=20)
p2 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(v=values,
values = values/first(values)) |> filter (geo == 'PL') |>
mutate (a.last = if_else (year == last.year, sprintf("%.0f", values * 100 - 100), NA))
View(p2)
p2 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(v=values,
values = values/first(values)) |>
mutate (a.last = if_else (year == last.year, sprintf("%.0f", values * 100 - 100), NA))  |>
ggplot(aes(x=year, y=values, color=age)) +
##
geom_text(aes(label = a.last), size=3, vjust = +1.6, hjust=.8, color = 'black', alpha=.9 ) +
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p2 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(v=values,
values = values/first(values)) |>
mutate (a.last = if_else (year == last.year, sprintf("%.0f", values * 100 - 100), NA))  |>
ggplot(aes(x=year, y=values, color=age)) +
##
geom_text(aes(label = a.last), size=3, vjust = +1.6, hjust=.8, color = 'black', alpha=.9 ) +
geom_point(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p2
ggsave(p2, file='UEM.png', height = 20, width=20)
p2 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(v=values,
values = values/first(values)) |>
mutate (a.last = if_else (year == last.year, sprintf("%.0f", values * 100 - 100), NA))  |>
ggplot(aes(x=year, y=values, color=age)) +
##
geom_text(aes(label = a.last), size=3, vjust = +1.6, hjust=.8, color = 'black', alpha=.9 ) +
geom_line(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p2
ggsave(p2, file='UEM.png', height = 20, width=20)
p2 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo, age) |> summarise(values = sum(values) ) |>
group_by( geo, age)  |>
mutate (last.year = last(year)) %>%
mutate(v=values,
values = values/first(values)) |>
mutate (a.last = if_else (year == last.year, sprintf("%.0f", values * 100 - 100), NA))  |>
filter (year >= as.Date("2024-12-31")) |>
ggplot(aes(x=year, y=values, color=age)) +
##
geom_text(aes(label = a.last), size=3, vjust = +1.6, hjust=.8, color = 'black', alpha=.9 ) +
geom_line(size=.5) +
facet_wrap(~ geo, ncol = 4, scales='fixed')
p2
ggsave(p2, file='UEM.png', height = 20, width=20)
p3 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo) |> summarise(values = sum(values) ) |>
ggplot(aes(x=values)) +
geom_bar(stat="identity", fill=bar.color,  alpha=.5  ) +
#########################################################################
#########################################################################
dp <- get_eurostat("proj_23np",  stringsAsFactors = FALSE)
p3 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo) |> summarise(values = sum(values) ) |>
ggplot(aes(x=values)) +
geom_bar(stat="identity", fill=bar.color,  alpha=.5  )
p3 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo) |> summarise(values = sum(values) ) |>
ggplot(aes(x=values)) +
geom_bar(stat="identity", fill='blue',  alpha=.5  )
p3
p3 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo) |> summarise(values = sum(values) ) |>
ggplot(aes(x=geo, y=values)) +
geom_bar(stat="identity", fill='blue',  alpha=.5  )
p3
p3 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo) |> summarise(values = sum(values) ) |>
ggplot(aes(x=reorder(geo, values), y=values)) +
geom_bar(stat="identity", fill='blue',  alpha=.5  )
p3
p3 <- dp0 |> filter (sex == "T") |>
filter (! geo %in% small.countries) |>
group_by(year, geo) |> summarise(values = sum(values)/1000 ) |>
ggplot(aes(x=reorder(geo, values), y=values)) +
geom_bar(stat="identity", fill='blue',  alpha=.5  )
p3
p3 <- dp0 |> filter (sex == "T" & age == 'TOTAL') |>
filter (! geo %in% small.countries) |>
group_by(year, geo) |> summarise(values = sum(values)/1000 ) |>
ggplot(aes(x=reorder(geo, values), y=values)) +
geom_bar(stat="identity", fill='blue',  alpha=.5  )
p3
